# SWM341 LVGL

## 移植说明

绘制缓冲区是 LVGL 用来渲染屏幕内容的简单数组。一旦渲染准备就绪，绘制缓冲区的内容将使用显示驱动程序中设置的flush_cb函数发送到显示器。

如您所见，绘制缓冲区可以小于屏幕。在这种情况下，较大的区域将被重新绘制为适合绘制缓冲区的较小部分。 如果只有一个小区域发生变化（例如按下按钮），则只会刷新该区域。

更大的缓冲区会导致更好的性能，但超过 1/10 屏幕大小的缓冲区没有显着的性能改进。 因此，建议选择绘制缓冲区的大小至少为屏幕大小的 1/10。

LVGL提供了三种配置缓冲区的方式，我们都对其进行移植。

- lv_port_disp1.c

只使用一个缓冲区，LVGL 将屏幕内容绘制到该绘制缓冲区中并将其发送到显示器。 这样 LVGL 需要等到缓冲区的内容发送到显示器，然后再在其中绘制新内容。

- lv_port_disp2_1.c

使用两个缓冲区，LVGL 可以绘制到一个缓冲区中，而另一个缓冲区的内容被发送到后台显示。 应使用 DMA2D 将数据传输到显示器，让 MCU 同时绘制。 这样，显示的渲染和刷新变得并行。

- lv_port_disp2_2.c

使用两个缓冲区，LVGL 可以绘制到一个缓冲区中，而另一个缓冲区的内容被发送到后台显示。 应使用 DMA 将数据传输到显示器，让 MCU 同时绘制。 这样，显示的渲染和刷新变得并行。

- lv_port_disp3.c

提供 2 个屏幕大小的绘制缓冲区，LVGL 的显示处理就像“传统”双缓冲一样工作。

这意味着在 flush_cb 中只有帧缓冲区的地址需要更改为提供的指针（color_p 参数）。 如果 MCU 具有 LCD 控制器外围设备而不是外部显示控制器（例如 ILI9341 或 SSD1963），则应使用此配置。

您可以使用 基准示例 测量不同绘制缓冲区配置的性能。
